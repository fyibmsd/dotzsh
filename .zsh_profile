# zsh plugins
source ~/.zsh/zsh-syntax-highlighting/zsh-syntax-highlighting.zsh
source ~/.zsh/zsh-autosuggestions/zsh-autosuggestions.zsh

plugins=(zsh-autosuggestions)

# config {

prompt_context () {
    prompt_segment black default $HOST
}

# }

# alias{
alias ll="ls -la"

alias -s gz='tar -xzvf'
alias -s tgz='tar -xzvf'
alias -s zip='unzip'
alias -s bz2='tar -xjvf'

alias clone='git clone --depth=1'
# }

# Software {
alias subl="/Applications/Sublime\ Text.app/Contents/SharedSupport/bin/subl"
alias mweb="/Applications/MWeb.app/Contents/MacOS/MWeb"

code () {  
    if [[ $# = 0 ]]  
    then  
        open -a "Visual Studio Code" 
    else 
        [[ $1 = /* ]] && F="$1" || F="$PWD/${1#./}" 
        open -a "Visual Studio Code" --args "$F" 
    fi  
}  

function cdf() {
    target=`osascript -e 'tell application "Finder" to if (count of Finder windows) > 0 then get POSIX path of (target of front Finder window as text)'`
    if [ "$target" != "" ]; then
        cd "$target"; pwd
    else
        echo 'No Finder window found' >&2
    fi
}

function destroy() {
   current=`pwd`
   echo "delete $current..."
   cd ..
   /bin/rm -rf $current
}

# }

# functions
alias homestead='function __homestead() { (cd ~/.composer/vendor/laravel/homestead && vagrant $*); unset -f __homestead; }; __homestead'
alias centos='function __centos() { (cd ~/code/scripts/vagrant/centos && vagrant $*); unset -f __centos; }; __centos'
alias clone='git clone --depth=1'

# config files
alias hosts="subl /etc/hosts"
alias phpini="subl /usr/local/etc/php/5.6/php.ini"
alias pac="subl ~/code/php/www/vps.pac"

# extra
alias server="php -S 0.0.0.0:8000 -t ."

# brew services
alias start="brew services start"
alias status="brew services status"
alias stop="brew services stop"
alias restart="brew services restart"
alias list="brew services list"

# alias composer="php -c /usr/local/etc/php/5.6/composer.ini /usr/local/bin/composer $*"
alias npm="npm --registry=https://registry.npm.taobao.org --disturl=https://npm.taobao.org/dist $*"
alias ip="ifconfig | grep 'inet ' | uniq"

# vps
alias ol="ssh root@101.201.71.143 -p 2322"
alias vagr="ssh vagrant@192.168.10.10"
alias co="ssh core@192.168.10.30"
alias rhel="ssh me@54.64.9.18"
alias ecs01="ssh root@123.56.4.184"
alias ecs02="ssh root@60.205.189.57"
alias ali="ssh root@fyibmsd.com"

# add nginx vhost
alias serve=serve-nginx

function serve-nginx() {
    if [[ "$1" && "$2" ]]
    then
        sudo bash ~/.zsh/utils/serve.sh "$1" "$2" mac
    else
        echo "Desc: Add nginx vhost."
        echo "Usage: "
        echo "  serve domain path"
    fi
}

# Golang
export GOROOT=/usr/local/opt/go/libexec
export GOPATH=/usr/local/share/go
export PATH=$PATH:$GOPATH/bin:$GOROOT/bin:~/.composer/vendor/bin:/usr/local/sbin:/usr/sbin:/sbin:/usr/local/bin:/usr/bin:/bin
export PHP=$HOME/code/php
export PTOOLSPATH=$HOME/code/php/library/vendor/phalcon/devtools

export NODE_PATH="/usr/local/lib/node_modules"
export EDITOR="/usr/local/bin/vim"

# Highlight linux man page
export LESS_TERMCAP_mb=$'\E[01;31m'
export LESS_TERMCAP_md=$'\E[01;31m'
export LESS_TERMCAP_me=$'\E[0m'
export LESS_TERMCAP_se=$'\E[0m'
export LESS_TERMCAP_so=$'\E[01;44;33m'
export LESS_TERMCAP_ue=$'\E[0m'
export LESS_TERMCAP_us=$'\E[01;32m'
source ~/.zsh/.zsh_local
